{% extends "base.html" %}

{% block content %}
  <div class="mt-3">
    <h1>To Do list <a href="{% url "to_do_list:task-create" %}"
    class="btn btn-success float-right">Add task</a></h1>
  </div>

  {% for task in task_list %}
    <div class="m-3 border-bottom">
      <h3>
        {{ task.content }}
      {% if task.is_completed %}
        <span class="text-success">done</span>
        <form action="{% url "to_do_list:task-complete" pk=task.pk %}" method="post" class="float-right">
          {% csrf_token %}
          <button type="submit" class="btn btn-secondary">Undo</button>
        </form>
        {% else %}
        <span class="text-danger">not done</span>
        <form action="{% url "to_do_list:task-complete" pk=task.pk %}" method="post" class="float-right">
          {% csrf_token %}
          <button type="submit" class="btn btn-success">Complete</button>
        </form>
      {% endif %}

      </h3>

      {% if task.deadline %}
        <p>Deadline: {{ task.deadline }}</p>
      {% endif %}
      <p class="text-muted">Created at: {{ task.created_at }}</p>
      <p>Tags: {% for tag in task.tags.all %}<span class="text-white bg-dark p-1">{{ tag.name }} </span>{% endfor %}</p>
      <p>
        <a href="{% url "to_do_list:task-update" pk=task.pk %}"
        class="btn btn-link">update</a>
        <a href="{% url "to_do_list:task-delete" pk=task.pk %}"
        class="btn btn-link">delete</a>
      </p>
      <br>
    </div>
  {% endfor %}

{% endblock %}
